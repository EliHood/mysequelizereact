(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a(294)},127:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),o=a.n(s),i=(a(127),a(12)),l=a(13),c=a(16),u=a(14),p=a(17),d=a(299),m=a(296),h=a(297),g=a(27),f=a(11),E=a(25),b=a.n(E),v=a(10),w=a.n(v),O=a(42),y=a.n(O),j=a(15),S=a(38),C=a(28),P=a.n(C),A=a(41),x=a(43),T=a.n(x),k=T.a.create({baseURL:"http://localhost:8000",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});k.interceptors.response.use(function(e){return e});var U=k,I=function(e){e?U.defaults.headers.common.Authorization=e:delete U.defaults.headers.common.Authorization},D=function(e){return function(t,a){return U.put("/api/posts/edit/".concat(e.id),{title:e.title}).then(function(){t({type:"UPDATE_POST",post:e}),Ie.push("/posts")})}},N=a(298),_=a(23),R=function(e){return{root:{flexGrow:1,padding:10},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},chip:{margin:e.spacing.unit},button:{marginLeft:10,margin:0,flexGrow:1,display:"inline-block"},box:{width:"500px"},rightToolbar:{color:"#fff",textDecoration:"none",a:{color:"#fff"}},signIn:{margin:"40px",padding:0,flexGrow:1},signUp:{margin:"40px",padding:0,flexGrow:1},rightt:{marginLeft:"auto",marginRight:24},navRoot:{flexGrow:1},menuButton:{marginRight:16,marginLeft:-12}}},F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={formData:{username:"",password:"",passwordConf:"",email:""},passErr:"",regSuccess:!1},a.handleChange=function(e){e.preventDefault();var t=a.state.formData;a.setState({formData:Object(f.a)({},t,Object(g.a)({},e.target.name,e.target.value))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.formData,n=t.username,r=t.email,s=t.password,o=t.passwordConf;a.setState({username:a.state.username,password:a.state.password,passwordConf:a.state.passwordConf,email:a.state.email});var i={username:n,email:r,password:s};s===o?a.props.register(i):a.setState({passErr:"Passwords Don't Match"})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.classes;return t?r.a.createElement(N.a,{to:"/dashboard"}):r.a.createElement(y.a,{justify:"center",container:!0},r.a.createElement(y.a,{item:!0,xs:12,sm:10,md:5},r.a.createElement("div",{className:a.signUp},this.props.error&&r.a.createElement("div",{style:{color:"red"}},this.props.error),this.state.passErr&&r.a.createElement("div",{style:{color:"red"}},this.state.passErr),r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(b.a,{id:"outlined-name",label:"Username",style:{width:"100%"},name:"username",value:this.state.username,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(b.a,{id:"outlined-name",label:"Email",className:"",style:{width:"100%"},name:"email",value:this.state.email,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(b.a,{id:"outlined-name",label:"Password",name:"password",type:"password",style:{width:"100%"},className:"",value:this.state.password,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(b.a,{id:"outlined-name",label:"Confirm Password",name:"passwordConf",type:"password",style:{width:"100%"},className:"",value:this.state.passwordConf,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(w.a,{m:2,variant:"outlined",color:"primary",type:"submit"},"Sign Up")))))}}]),t}(n.Component),L=Object(_.d)(Object(j.b)(function(e){return{token:e.user.getToken,isAuthenticated:e.user.isAuthenticated,error:e.user.authError}},function(e){return{register:function(t){return e(function(e){return function(t){U.post("/api/users/new",{username:e.username,password:e.password,email:e.email}).then(function(a){var n=a.data.token;localStorage.setItem("auth",n),I(n),console.log(a.data),Ie.push("/dashboard"),t({type:"REG_SUCCESS",user:e})}).catch(function(e){t({type:"REG_FAIL",err:e}),console.log(e.response.data)})}}(t))}}}),Object(S.withStyles)(R))(F),G=function(e){return r.a.createElement(m.a,Object.assign({to:"/Forgot"},e))},W=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={formData:{username:"",password:""},loggedEmail:"",loginError:"",myToken:"",userLoggedIn:!1,emailBlank:!0,passwordBlank:!0,emailInvalid:!1,passwordInValid:!1},a.handleChange=function(e){e.preventDefault();var t=a.state.formData;a.setState({formData:Object(f.a)({},t,Object(g.a)({},e.target.name,e.target.value))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.formData,n={username:t.username,password:t.password};a.props.logIn(n),console.log(n)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.props.isAuthenticated?r.a.createElement(N.a,{to:"/dashboard"}):r.a.createElement("div",{className:e.signIn},r.a.createElement(y.a,{justify:"center",container:!0},r.a.createElement(y.a,{item:!0,xs:12,sm:"auto",md:4},this.props.error&&r.a.createElement("div",{style:{color:"red"}},this.props.error),r.a.createElement("h1",null,"Sign In"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(b.a,{id:"outlined-name2",label:"Username",className:"",fullWidth:!0,name:"username",value:this.state.username,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement(b.a,{id:"outlined-name",label:"Password",name:"password",type:"password",fullWidth:!0,className:"",value:this.state.password,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"outlined",color:"primary",type:"submit"},"Log In"),r.a.createElement(w.a,{component:G,variant:"outlined",type:"submit",className:e.button},"Forgot Password ?")))))}}]),t}(n.Component),M=Object(_.d)(Object(j.b)(function(e){return{token:e.user.getToken,isAuthenticated:e.user.isAuthenticated,error:e.user.authError}},function(e){return{logIn:function(t){return e(function(e){return function(t){U.post("/api/users/loginUser",{username:e.username,password:e.password}).then(function(a){var n=a.data.token;localStorage.setItem("auth",n),I(n),Ie.push("/dashboard"),t({type:"SET_USER",user:e})}).catch(function(e){t({type:"LOG_FAIL",err:e}),console.log(e.response.data)})}}(t))}}}),Object(S.withStyles)(R))(W),z=a(39),J=a(300),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){e.preventDefault();var t=a.state.formData;a.setState({formData:Object(f.a)({},t,Object(g.a)({},e.target.name,e.target.value))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.formData,n=t.title,r=t.postContent;a.setState({title:a.state.title,postContent:a.state.postContent});var s={title:n,postContent:r};a.props.newPost(s),console.log(s)},a.state={formData:{title:"",postContent:"",userId:""},passErr:"",regSuccess:!1},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.token)}},{key:"render",value:function(){return this.props.isAuthenticated?r.a.createElement("div",{style:{padding:"20px 100px"}},this.props.error&&r.a.createElement("div",{style:{color:"red"}},this.props.error),this.state.passErr&&r.a.createElement("div",{style:{color:"red"}},this.state.passErr),r.a.createElement("h1",null,"New Post"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(b.a,{id:"outlined-name",label:"Title",style:{width:560},name:"title",value:this.state.title,onChange:this.handleChange,margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(b.a,{id:"outlined-multiline-static",label:"Post Content",name:"postContent",multiline:!0,style:{width:560},rows:"4",value:this.state.postContent,onChange:this.handleChange,defaultValue:"",margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"outlined",color:"primary",type:"submit"},"Submit"))):r.a.createElement(N.a,{to:"/signIn"})}}]),t}(n.Component),H=Object(J.a)(Object(j.b)(function(e){return{token:e.user.getToken,error:e.post.postError,isAuthenticated:e.user.isAuthenticated}},function(e){return{newPost:function(t){return e(function(e,t){return function(t){U.post("/api/posts/newPost",{title:e.title,post_content:e.postContent}).then(function(a){Ie.push("/Posts"),t({type:"POST_SUCC",post:e})}).catch(function(e){t({type:"POST_FAIL",err:e}),console.log(e.response.data)})}}(t))}}})(B)),V={myPaper:{margin:"20px 0px",padding:"20px"},wrapper:{padding:"0px 60px"},textF:{width:"500px"}},q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(g.a)({},e,t.target.value))}},a.sendEmail=function(e){e.preventDefault();var t={email:a.state.email};console.log(t),a.props.Forget(t)},a.state={email:""},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.sendEmail=a.sendEmail.bind(Object(z.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email;e.messageFromServer,e.showNullError,e.showError;return r.a.createElement("div",{className:"App",style:V.wrapper},r.a.createElement("h1",null," Forgot Password"),this.props.showError&&r.a.createElement("div",null,r.a.createElement("p",null,"That email address isn't recognized. Please try again or register for a new account.")),"recovery email sent"===this.props.messageFromServer&&r.a.createElement("div",null,r.a.createElement("h3",null,"Password Reset Email Successfully Sent!")),r.a.createElement("form",{className:"profile-form",onSubmit:this.sendEmail},r.a.createElement(b.a,{id:"email",label:"Email",style:V.textF,value:t,onChange:this.handleChange("email"),placeholder:"Email Address"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"outlined",type:"submit"},"Send Password Reset Email")))}}]),t}(n.Component),Y=Object(J.a)(Object(j.b)(function(e){return{showError:e.account.showError,messageFromServer:e.account.messageFromServer}},function(e){return{Forget:function(t){return e(function(e){return function(t){U.post("/api/users/forgotPassword",{email:e.email}).then(function(a){console.log(e.email),console.log(a.data),"recovery email sent"===a.data&&t({type:"FORGOT",creds:e})}).catch(function(e){console.log(e.response.data),"email not in db"===e.response.data&&t({type:"FORGET_ERR",err:e})})}}(t))}}})(q)),$=a(33),K=a.n($),Q=a(60),X=a.n(Q),Z=a(51),ee=a.n(Z),te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:""},a.componentWillMount=function(){},a.fetchData=function(){fetch("http://localhost:8000/api/users/auth/github",{method:"GET",mode:"cors"}).then(function(e){console.log(e)}).catch(function(e){})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.props.isAuthenticated?r.a.createElement(N.a,{to:"/dashboard"}):r.a.createElement("div",{className:e.root},r.a.createElement(y.a,{container:!0,justify:"center",spacing:44},r.a.createElement(y.a,{item:!0,sm:7},r.a.createElement(K.a,{className:e.paper},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(ee.a,{label:"Sign In with Github",clickable:!0,onClick:this.fetchData,avatar:r.a.createElement(X.a,{alt:"Natacha",src:"https://avatars0.githubusercontent.com/u/9919?s=280&v=4"}),component:"a",className:e.chip}),r.a.createElement(ee.a,{label:"Sign Up with E-Mail",clickable:!0,href:"/signUp",component:"a",className:e.chip})))))}}]),t}(n.Component),ae=Object(_.d)(Object(j.b)(function(e){return{token:e.user.getToken,isAuthenticated:e.user.isAuthenticated,redirectTo:e.user.redirectTo}},function(e){return{}}),Object(S.withStyles)(R))(te),ne=a(77),re=a.n(ne),se=a(31),oe=a.n(se),ie=function(e){return r.a.createElement("div",null,r.a.createElement(b.a,{id:"outlined-name",label:"Title",style:{width:560},name:"title",value:e.editField,onChange:e.editChange,margin:"normal",required:!0,variant:"outlined"}))},le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onUpdate=function(e,t){return function(){if(null!==a.props.myTitle){var n={id:e,title:t};a.props.UpdatePost(n)}}},a.state={disabled:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.id,n=e.removePost,s=e.createdAt,o=e.post_content,i=e.username,l=e.editForm,c=e.isEditing,u=e.editChange,p=e.myTitle;e.postUpdate;return r.a.createElement("div",null,r.a.createElement(oe.a,{variant:"h6",component:"h3"},c?r.a.createElement(ie,{editField:p||t,editChange:u}):r.a.createElement("div",null,t)),r.a.createElement(oe.a,{component:"p"},o,r.a.createElement("h5",null,"by: ",i),r.a.createElement(oe.a,{color:"textSecondary"},re()(s).calendar())),c?r.a.createElement("div",null,r.a.createElement(w.a,{disabled:p.length<=3,variant:"outlined",onClick:this.onUpdate(a,p)},"Update"),r.a.createElement(w.a,{variant:"outlined",style:{marginLeft:"0.7%"},onClick:l(null)},"Close")):r.a.createElement(w.a,{variant:"outlined",type:"submit",onClick:l(a)},"Edit"),!c&&r.a.createElement(w.a,{style:{marginLeft:"0.7%"},variant:"outlined",color:"primary",type:"submit",onClick:n(a)},"Remove"))}}]),t}(n.Component),ce=Object(j.b)(null,function(e){return{UpdatePost:function(t){return e(D(t))}}})(le),ue={myPaper:{margin:"20px 0px",padding:"20px"}},pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).removePost=function(e){return function(){a.props.DeletePost(e)}},a.onChange=function(e){e.preventDefault(),a.setState({title:e.target.value})},a.formEditing=function(e){return function(){a.props.EditChange(e)}},a.state={title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.posts;return r.a.createElement("div",null,t.map(function(t,a){return r.a.createElement(K.a,{key:t.id,style:ue.myPaper},r.a.createElement(ce,Object.assign({myTitle:e.state.title,editChange:e.onChange,editForm:e.formEditing,isEditing:e.props.isEditingId===t.id,removePost:e.removePost},t)))}))}}]),t}(n.Component),de=Object(j.b)(function(e){return{isEditingId:e.post.isEditingId}},function(e){return{EditChange:function(t){return e(function(e){return function(t){t({type:"EDIT_CHANGE",id:e})}}(t))},UpdatePost:function(t){return e(D(t))},DeletePost:function(t){return e(function(e){return function(t,a){return U.post("/api/posts/delete/".concat(e)).then(function(){t({type:"DELETE_POST",id:e})})}}(t))}}})(pe),me={myPaper:{margin:"20px 0px",padding:"20px"},wrapper:{padding:"0px 60px"}},he=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],loading:!0,isEditing:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=Object(A.a)(P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.GetPosts();case 2:this.setState({loading:!1}),t=this.props.myPosts,t,console.log(t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loading,t=this.props.myPosts;return this.props.isAuthenticated?e?"loading...":r.a.createElement("div",{className:"App",style:me.wrapper},r.a.createElement("h1",null," Posts "),r.a.createElement(de,{posts:t})):r.a.createElement(N.a,{to:"/signIn"})}}]),t}(n.Component),ge=Object(J.a)(Object(j.b)(function(e){return{isAuthenticated:e.user.isAuthenticated,myPosts:e.post.posts}},function(e,t){return{GetPosts:function(){return e(function(e,t){return U.get("/api/posts/myPosts").then(function(t){var a=t.data;console.log(a),e({type:"GET_POSTS",data:a})})})}}})(he)),fe={myPaper:{margin:"20px 0px",padding:"20px"},wrapper:{padding:"0px 60px"}},Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getUsers=Object(A.a)(P.a.mark(function e(){var t,n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a.setState({users:n,loading:!1}),console.log(a.state.users);case 8:case"end":return e.stop()}},e,this)})),a.state={users:[],loading:!0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.users;return t?"loading...":r.a.createElement("div",{className:"App",style:fe.wrapper},r.a.createElement("h1",null," Welcome"),a.map(function(e,t){return r.a.createElement(K.a,{key:t,style:fe.myPaper},r.a.createElement(oe.a,{variant:"h6",component:"h3"},e.username),r.a.createElement(oe.a,{component:"p"},e.email))}))}}]),t}(n.Component),be=a(48),ve=a.n(be),we=a(119),Oe=a.n(we),ye={myPaper:{margin:"20px 0px",padding:"20px"},wrapper:{padding:"0px 60px"}},je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",email:"",username:"",password:"",isLoading:!0,deleted:!1,error:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App",style:ye.wrapper},r.a.createElement("h1",null," Welcome"))}}]),t}(n.Component),Se=Object(_.d)(Object(j.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},null))(je),Ce=a(40),Pe={margin:"1em",fontSize:"24px"},Ae={pageTitle:"Update Password Screen"},xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(g.a)({},e,t.target.value))}},a.updatePassword=function(e){var t=localStorage.getItem("JWT");null===t?a.setState({loadingUser:!1,error:!0}):(e.preventDefault(),T.a.put("/api/users/updatePassword",{username:a.state.username,password:a.state.password},{headers:{Authorization:"JWT ".concat(t)}}).then(function(e){"password updated"===e.data.message&&a.setState({updated:!0,error:!1,loadingUser:!1})}).catch(function(e){console.log(e.response.data),a.setState({updated:!1,error:!0,loadingUser:!1})}))},a.state={username:"",password:"",loadingUser:!1,updated:!1,error:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loadingUser:!0});var t=localStorage.getItem("JWT");null===t?this.setState({loadingUser:!1,error:!0}):T.a.get("/api/users/findUser",{params:{username:this.props.match.params.username},headers:{Authorization:"JWT ".concat(t)}}).then(function(t){e.setState({loadingUser:!1,username:t.data.username,password:t.data.password,error:!1})}).catch(function(t){console.log(t.response.data),e.setState({loadingUser:!1,error:!0})})}},{key:"render",value:function(){var e=this.state,t=(e.username,e.password),a=e.updated,n=e.error,s=e.loadingUser;return n?r.a.createElement("div",null,r.a.createElement(ve.a,{title:Ae}),r.a.createElement("p",{style:Pe},"There was a problem accessing your data. Please go login again.")):!1!==s?r.a.createElement("div",null,r.a.createElement(ve.a,{title:Ae}),r.a.createElement("p",{style:Pe},"Loading user data...")):!1===s&&!0===a?r.a.createElement(N.a,{to:"/dashboard"}):!1===s?r.a.createElement("div",null,r.a.createElement(ve.a,{title:Ae}),r.a.createElement("form",{className:"profile-form",onSubmit:this.updatePassword},r.a.createElement(b.a,{id:"password",label:"password",value:t,onChange:this.handleChange("password"),type:"password"}),r.a.createElement(w.a,{variant:"outlined",type:"submit"},"Save Changes"))):void 0}}]),t}(n.Component),Te={myPaper:{margin:"20px 0px",padding:"20px"},wrapper:{padding:"0px 60px"},textF:{width:"500px"}},ke=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){return function(a){e.setState(Object(g.a)({},t,a.target.value))}},e.updatePassword=function(t){t.preventDefault();var a=e.state,n={username:a.username,password:a.password};e.props.updatePass(n)},e.state={username:"",password:"",confirmPassword:"",update:!1,isLoading:!0,error:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(A.a)(P.a.mark(function e(){var t=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/users/reset",{params:{resetPasswordToken:this.props.match.params.token}}).then(function(e){console.log(e),"password reset link a-ok"===e.data.message&&t.setState({username:e.data.username,update:!1,isLoading:!1,error:!1})}).catch(function(e){console.log(e.response.data),t.setState({update:!1,isLoading:!1,error:!0})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.password;e.error,e.isLoading,e.updated;return r.a.createElement("div",{className:"App",style:Te.wrapper},r.a.createElement("h1",null," Update Password"),this.props.updated&&r.a.createElement("div",null,r.a.createElement("p",null,this.props.updated)),r.a.createElement("form",{className:"password-form",onSubmit:this.updatePassword},r.a.createElement(b.a,{id:"Password",label:"Password",style:Te.textF,onChange:this.handleChange("password"),value:t,type:"password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{color:"primary",variant:"outlined",type:"submit"},"Update Password")))}}]),t}(n.Component),Ue=Object(J.a)(Object(j.b)(function(e){return{updated:e.account.update,isLoading:e.account.isLoading}},function(e){return{Reset:function(){return e(function(){var e=Object(A.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/api/users/reset",{params:{resetPasswordToken:(void 0).props.match.params.token}}).then(function(e){console.log(e),"password reset link a-ok"===e.data.message&&t({type:"RESET"})}).catch(function(e){console.log(e.response.data),t({type:"RESET_FAIL",err:e})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},updatePass:function(t){return e(function(e){return function(t){U.put("/api/users/updatePasswordViaEmail",{username:e.username,password:e.password}).then(function(a){console.log(a),t({type:"UPDATEPASS",creds:e})}).catch(function(e){t({type:"UPDATEPASS_FAIL",err:e})})}}(t))}}})(ke)),Ie=Object(Ce.a)({forceRefresh:!0}),De=function(e){e.preventDefault(),U.get("http://localhost:8000/api/users/logout",{withCredentials:!0}).then(function(e){200===e.status&&(localStorage.removeItem("auth"),localStorage.removeItem("myAuth"),Ie.push("/"))}).catch(function(e){localStorage.removeItem("auth"),localStorage.removeItem("myAuth"),Ie.push("/")})},Ne=Object(_.d)(Object(j.b)(function(e){return{token:e.user.getToken,githubAuth:e.user.githubAuth,isAuthenticated:e.user.isAuthenticated}},function(e){return{}}),Object(S.withStyles)(R))(function(e){var t=e.classes,a=e.isAuthenticated;return r.a.createElement(d.a,{history:Ie},r.a.createElement("div",{className:t.navRoot},r.a.createElement(ve.a,{position:"static",className:t.navbar},r.a.createElement(Oe.a,null,r.a.createElement(oe.a,{variant:"h6",color:"inherit"},"Express Seqeuelize App"),r.a.createElement(oe.a,{classcolor:"inherit",className:t.rightt},!a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{to:"/",className:t.rightToolbar},"Home")),a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{className:t.rightToolbar,to:"/posts"},"Posts")),!a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{to:"/signUp",className:t.rightToolbar},"Sign Up")),!a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{to:"/signIn",className:t.rightToolbar},"Sign In")),a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{className:t.rightToolbar,to:"/Post"},"New Post")),a&&r.a.createElement(w.a,null,r.a.createElement(m.a,{to:"/dashboard",className:t.rightToolbar},"Dashboard")),a&&r.a.createElement(w.a,{onClick:De},"LogOut")))),r.a.createElement(h.a,{exact:!0,path:"/signUp",component:L}),r.a.createElement(h.a,{exact:!0,path:"/",component:ae}),r.a.createElement(h.a,{exact:!0,path:"/signIn",component:M}),r.a.createElement(h.a,{exact:!0,path:"/Post",component:H}),r.a.createElement(h.a,{exact:!0,path:"/Posts",component:ge}),r.a.createElement(h.a,{path:"/Forgot",component:Y}),r.a.createElement(h.a,{path:"/users",component:Ee}),r.a.createElement(h.a,{exact:!0,path:"/logout"}),r.a.createElement(h.a,{exact:!0,path:"/dashboard",component:Se}),r.a.createElement(h.a,{path:"/test"}),r.a.createElement(h.a,{path:"/reset/:token",component:Ue}),r.a.createElement(h.a,{exact:!0,path:"/updatePassword/:username",component:xe})))}),_e=a(120),Re=a.n(_e),Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:"",isAuthenticated:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){if(null!=localStorage.auth){I(localStorage.auth);var e=localStorage.getItem("auth"),t=Re()(e);this.props.setCurrentUser(t)}}},{key:"render",value:function(){var e=this.props;e.classes,e.isAuthenticated;return r.a.createElement("div",{className:"App"},r.a.createElement(Ne,null))}}]),t}(n.Component),Le=Object(_.d)(Object(j.b)(function(e){return{isAuthenticated:e.user.isAuthenticated,owl:e.user.owl}},function(e){return{getUser:function(){return e(function(){var e=Object(A.a)(P.a.mark(function e(t,a){var n,r;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("/api/users/current_user",{withCredentials:"same-origin"});case 2:n=e.sent,r=n.data.auth,console.log(r),localStorage.setItem("myAuth",r),t({type:"GET_CURRENT_USER",data:r});case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},setCurrentUser:function(){return e({type:"GET_USER",payload:t});var t}}}),Object(S.withStyles)(R))(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=a(121),We={authError:null,isAuthenticated:localStorage.getItem("auth"),githubAuth:localStorage.getItem("gitAuth"),token:null,user:[],owl:localStorage.getItem("myAuth"),redirectPath:null},Me={post:[],postError:null,posts:[],isEditing:!1,isEditingId:null},ze={showError:!1,messageFromServer:null,showNullError:null,username:null,update:null,isLoading:!1,error:!1,errorMessage:null},Je=Object(_.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return console.log(t.payload),Object(f.a)({},e,{user:t.user,token:t.payload,isAuthenticated:t.isAuthenticated});case"LOG_FAIL":return Object(f.a)({},e,{authError:t.err.response.data});case"GET_USER":return Object(f.a)({},e);case"GET_CURRENT_USER":return Object(f.a)({},e,{owl:t.data.owl});case"REG_SUCCESS":return Object(f.a)({},e,{user:t.user,token:t.payload});case"REG_FAIL":return Object(f.a)({},e,{authError:t.err.response.data});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_SUCC":return Object(f.a)({},e,{post:t.post});case"POST_FAIL":return Object(f.a)({},e,{postError:t.err.response.data});case"GET_POSTS":return Object(f.a)({},e,{posts:t.data});case"DELETE_POST":return Object(f.a)({},e,{posts:e.posts.filter(function(e){return e.id!==t.id})});case"UPDATE_POST":return Object(f.a)({},e);case"EDIT_CHANGE":return Object(f.a)({},e,{isEditingId:t.id});default:return e}},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT":return Object(f.a)({},e,{showError:!1,messageFromServer:"recovery email sent"});case"FORGET_ERR":return Object(f.a)({},e,{showError:!0,messageFromServer:"",showNullError:!1});case"RESET":return Object(f.a)({},e,{username:t.creds.username,update:!1,isLoading:!1,error:!1});case"RESET_FAIL":return Object(f.a)({},e,{update:!1,isLoading:!1,error:!0});case"UPDATEPASS":return Object(f.a)({},e,{update:"Your password has been successfully reset, please try logging in again",error:!1});case"UPDATEPASS_FAIL":return Object(f.a)({},e,{update:"Please Enter An Email",error:!0});default:return e}}}),Be=Object(S.createMuiTheme)({palette:{primary:{light:"#757ce8",main:"#7986cb"},secondary:{main:"#9fa8da"}}}),He=Object(_.a)(Ge.a)(_.e)(Je);o.a.render(r.a.createElement(j.a,{store:He},r.a.createElement(d.a,null,r.a.createElement(S.MuiThemeProvider,{theme:Be},r.a.createElement(Le,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,2,1]]]);
//# sourceMappingURL=main.2bf74a78.chunk.js.map